# 帧内预测

本章回顾了 HEVC 的帧内编码工具。本章会给出大量可用的预测模式，包括功能描述和示例。此外，详细描述了所应用的帧内预测模式的编码表示。

应用帧内或帧间预测的决定基于 CU ,并且由 CU 的预测模式标志指示。帧内模式下的 CU 由同一 slice 内重建的相邻样本预测。在 I slice 内，仅对 CU 启用帧内预测。在 P 和 B slice 中，CU可以同时处于帧内和帧间预测模式。用作随机访问点的图片仅包含 I slice，因为这些图片不得引用以前的图片。在 P 或 B slice 中，如果未指示来自先前解码的图片的预测，例如对于当前图片中先前不可见的内容，则建议选择帧内模式。

HEVC 中提供了一组35个帧内预测模式，包括DC、Plannar和33个角度预测模式。帧内预测模式的编号如图6.1所示。预测模式2-18表示为水平预测模式，因为预测的主要来源在水平方向。模式19-34相应地表示为垂直预测模式。这些模式可用于从4x4到32x32个样本的预测块大小。对于亮度块和色度块，应用相同的预测模式。对于色度块，省略应用于 luma 帧内预测的一些平滑操作，如下所述。预测参考由于预测块相邻的样本行和样本列构成。使用先前重构块中的可用样本，参考在水平和垂直方向上延伸超过块大小的两倍。

相邻块的可用性可被配置为取决于预测模式。为了获得最佳预测性能，可以应用对来自帧间或帧内预测的相邻块的样本的引用。因此，对于不是只有帧内编码的 slice，引入帧内预测对帧间预测块的依赖性。如果应用要求 P slice 或 B slice中的帧内预测块完全独立，则可以通过图片参数集中的相应标志来配置受约束的帧内预测。激活该标志后，只允许参考先前帧内预测的相邻块，并且消除帧内块对帧间块的任何依赖性。

这可能有助于防止之前损坏的图片在有损环境中传播错误。

## 6.1 预测模式与预测块

CUs 处于帧内模式的情况下，预测单元的含义和表示，不同于帧间模式。对于帧间CUs，预测单元的参数以专用语法结构表示，这种结构不存在于帧内CUs。帧内预测参数在 CU 级别上编码。

如第4.2.4节所述，将 CTU 划分为 CU 会形成方形块的四叉树结构。帧内预测也应用于方形预测块大小。为了限制signaling overhead，用于帧内预测的预测块大小通常对应于编码块大小。针对CU使用合适的帧内预测模式编码。仅对于序列参数集中指定的最小CB大小，可以应用分为四个平方预测块的子分区。在这种情况下，为这些预测块中的每一个提供专用帧内预测模式。由于最小可配置编码块大小为8x8，因此该构造允许使用专用帧内预测模式指示 4x4 帧内预测块。
